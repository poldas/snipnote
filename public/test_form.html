<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Note Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">
    <h1 class="text-2xl font-bold mb-4">Test formularza notatki</h1>
    
    <!-- Title Field Test -->
    <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
            <label for="note-title" class="block text-sm font-semibold text-slate-700">
                Tytu
            </label>
            <span id="title-counter" data-title-counter class="text-xs text-slate-500">
                0 / 255
            </span>
        </div>
        <input
            type="text"
            id="note-title"
            data-title-input
            maxlength="255"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg"
            placeholder="Wpisz tytu..."
        >
    </div>

    <!-- Visibility Toggle Test -->
    <div class="mb-6">
        <label class="block text-sm font-semibold text-slate-700 mb-3">
            Widoczno
        </label>
        <div class="inline-flex rounded-lg border border-slate-300 bg-slate-50 p-1" data-visibility-toggle>
            <input type="radio" id="visibility-private" name="visibility" value="private" data-visibility-input class="sr-only" checked>
            <label for="visibility-private" class="px-4 py-2 text-sm font-medium rounded-md cursor-pointer bg-white text-indigo-700 border border-indigo-200" data-visibility-label="private">
                 Prywatna
            </label>

            <input type="radio" id="visibility-public" name="visibility" value="public" data-visibility-input class="sr-only">
            <label for="visibility-public" class="px-4 py-2 text-sm font-medium rounded-md cursor-pointer text-slate-600" data-visibility-label="public">
                 Publiczna
            </label>
        </div>
        <p class="mt-2 text-xs text-slate-500" data-visibility-description>
            Notatka widoczna tylko dla Ciebie i wsp贸pracownik贸w.
        </p>
    </div>

    <!-- Console Log Area -->
    <div class="mt-8 p-4 bg-gray-100 rounded">
        <h2 class="font-bold mb-2">Console Logs:</h2>
        <div id="console-log" class="text-sm font-mono"></div>
    </div>

    <script>
        // Override console.log to display in page
        const logDiv = document.getElementById('console-log');
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const p = document.createElement('p');
            p.textContent = args.join(' ');
            logDiv.appendChild(p);
        };

        // Test script
        console.log('=== TEST START ===');
        console.log('DOM readyState:', document.readyState);
        
        const titleInput = document.querySelector('[data-title-input]');
        const titleCounter = document.querySelector('[data-title-counter]');
        const visibilityInputs = document.querySelectorAll('[data-visibility-input]');
        
        console.log('Title input found:', !!titleInput);
        console.log('Title counter found:', !!titleCounter);
        console.log('Visibility inputs found:', visibilityInputs.length);
        
        if (titleInput && titleCounter) {
            titleInput.addEventListener('input', function() {
                const length = this.value.length;
                titleCounter.textContent = `${length} / 255`;
                console.log('Title changed, length:', length);
            });
            console.log('Title input event listener attached');
        }
        
        if (visibilityInputs.length > 0) {
            visibilityInputs.forEach((input, index) => {
                input.addEventListener('change', function() {
                    console.log('Visibility changed to:', this.value);
                    const description = document.querySelector('[data-visibility-description]');
                    if (description) {
                        const texts = {
                            private: 'Notatka widoczna tylko dla Ciebie i wsp贸pracownik贸w.',
                            public: 'Notatka bdzie widoczna publicznie pod unikalnym linkiem.'
                        };
                        description.textContent = texts[this.value] || texts.private;
                    }
                    
                    // Update label styles
                    document.querySelectorAll('[data-visibility-label]').forEach(label => {
                        const value = label.getAttribute('data-visibility-label');
                        if (value === this.value) {
                            label.classList.add('bg-white', 'text-indigo-700', 'border', 'border-indigo-200');
                            label.classList.remove('text-slate-600');
                        } else {
                            label.classList.remove('bg-white', 'text-indigo-700', 'border', 'border-indigo-200');
                            label.classList.add('text-slate-600');
                        }
                    });
                });
                console.log('Visibility input', index, 'event listener attached');
            });
        }
        
        console.log('=== TEST COMPLETE ===');
    </script>
</body>
</html>

