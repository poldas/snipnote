{% extends 'auth/auth_layout.html.twig' %}

{% block title %}Potwierdź email | Snipnote{% endblock %}

{% block auth_hero %}
    <div class="space-y-4">
        <h1 class="text-3xl lg:text-4xl font-bold text-indigo-950">Sprawdź swoją skrzynkę email</h1>
        <p class="text-lg lg:text-xl text-slate-600">Wysłaliśmy link aktywacyjny na podany adres email.</p>
        <p class="text-sm text-indigo-600 bg-indigo-50 px-4 py-2 rounded-lg inline-block">
            Krok 2 z 2 - potwierdź rejestrację
        </p>
    </div>
{% endblock %}

{% block auth_hero_mobile %}
    <div class="space-y-2">
        <h1 class="text-2xl font-bold text-indigo-950">Potwierdź e-mail</h1>
        <p class="text-sm text-slate-600">Sprawdź swoją skrzynkę.</p>
    </div>
{% endblock %}

{% block auth_content %}
    {% set state = state ?? 'pending' %}
    {% set prefill = prefill ?? {} %}
    {% set errors = errors ?? [] %}
    {% set pending = pending ?? false %}
    {% set variant = variant ?? (state == 'invalid' ? 'warning' : 'info') %}
    {% set message = message ?? (state == 'invalid' ? 'Link wygasł lub jest nieprawidłowy.' : 'Wysłaliśmy link aktywacyjny na Twój email.') %}
    {% set steps = steps ?? [
        'Sprawdź skrzynkę oraz folder spam/oznaczone.',
        'Link jest jednorazowy i ma ograniczony czas ważności.',
        'Jeśli link nie działa, wyślij go ponownie poniżej.'
    ] %}

    <div class="bg-white/90 backdrop-blur-lg rounded-2xl sm:rounded-3xl shadow-2xl border border-slate-200/50 p-6 sm:p-8">
            <div class="space-y-6">
                <!-- Status Message -->
                {% include 'components/alert.html.twig' with {
                    type: variant == 'invalid' ? 'warning' : 'info',
                    title: message,
                    messages: steps|map(s => '• ' ~ s)
                } %}

                <!-- Resend Form -->
                <div class="border-t border-slate-200/50 pt-6">
                    <h3 class="text-lg font-semibold text-slate-900 mb-4">Nie otrzymałeś linku?</h3>

                    {% include 'auth/components/verify_resend_form.html.twig' with {
                        action: action ?? path('app_verify_email_resend'),
                        prefill: prefill,
                        errors: errors,
                        pending: pending
                    } %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}


